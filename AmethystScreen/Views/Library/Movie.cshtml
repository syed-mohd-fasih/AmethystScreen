@model AmethystScreen.Models.Movie
@{
    ViewData["Title"] = Model.Title;
}

<head>
    <style>
        .card:hover {
            transform: none;
            box-shadow: none;
        }

        #movie-image-container {
            display: block;
            overflow: hidden;
            position: relative;
            transition: transform 0.3s ease-in-out;
        }

            #movie-image-container::after {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0);
                transition: background 0.3s ease-in-out;
                pointer-events: none;
            }

            #movie-image-container:hover::after {
                background: rgba(0, 0, 0, 0.5);
            }

        #movie-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            border: 5px solid blueviolet;
        }

        #movie-desc-container {
            background-color: blueviolet;
            color: black;
            display: block;
        }

        #movie-video-container {
            width: 100%;
            height: 100%;
            margin: auto;
            background-color: black;
        }

        #movie-video {
            width: 100%;
            height: 90%;
            object-fit: cover;
            margin-top: 100px;
            margin-bottom: 100px;
            border: solid 10px blueviolet;
            border-radius: 5px;
        }

        #library-btn {
            position: absolute;
            top: 0;
            right: 0;
            margin-top: 5px;
            margin-right: 5px;
            z-index: 10;
            height: 50px;
            width: 50px;
        }
    </style>
</head>

<div class="card h-100 w-100 position-relative">
        <a type="button" asp-action="Index" class="btn-close" id="library-btn"></a>
    <div class="row g-0">
        <div class="col-md-4" id="movie-image-container">
            <img src="@Model.Image" class="h-100 w-100 rounded-start" id="movie-image" alt="@Model.Title" />
        </div>
        <div class="col-md-8 rounded-end" id="movie-desc-container">
            <div class="card-body">
                <p class="card-title lato-bold fs-1">@Model.Title</p>
                <hr />
                <p class="card-text pb-0">@Model.Year</p>
                <p class="card-text pb-0">[@Model.Language]</p>
                <p class="card-text">@String.Join(", ", Model.Tags)</p>
                <p class="card-text">IMDB Rating: <span class="lato-bold">@Model.Rating</span></p>
                <hr />
                <p class="card-text fs-4"><strong>Synopsis:</strong></p>
                <p class="card-text fs-4">@Model.Description</p>
            </div>
        </div>
    </div>
</div>

<div id="movie-video-container" class="d-flex align-items-center justify-content-center visually-hidden">
    <video id="movie-video" controls>
        <source src="/library/video/@Model.VideoUrl" type="video/mp4">
        <source src="/library/video/@Model.VideoUrl" type="video/webm">
        <source src="/library/video/@Model.VideoUrl" type="video/x-msvideo">
        <source src="/library/video/@Model.VideoUrl" type="video/quicktime">
        <source src="/library/video/@Model.VideoUrl" type="video/x-ms-wmv">
        <source src="/library/video/@Model.VideoUrl" type="video/x-matroska">
        <source src="/library/video/@Model.VideoUrl" type="video/mpeg">
        Your browser does not support the video tag.
    </video>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const imageEl = document.getElementById('movie-image-container');
        const videoEl = document.getElementById('movie-video-container');
        const descEl = document.getElementById('movie-desc-container');

        imageEl.addEventListener('click', function () {
            if(videoEl.classList.contains('visually-hidden')) {
                videoEl.classList.remove('visually-hidden');
                imageEl.style.display = 'none';
                descEl.style.display = 'none';
                videoEl.style.display = 'flex';
            }
        });
    });
</script>
